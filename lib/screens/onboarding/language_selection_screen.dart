import 'package:flutter/material.dart';

class LanguageSelectionScreen extends StatefulWidget {
  final Function(String) onLanguageSelected;
  final String? selectedLanguage;

  const LanguageSelectionScreen({
    super.key,
    required this.onLanguageSelected,
    this.selectedLanguage,
  });

  @override
  State<LanguageSelectionScreen> createState() => _LanguageSelectionScreenState();
}

class _LanguageSelectionScreenState extends State<LanguageSelectionScreen> {
  final List<Map<String, String>> _languages = [
    {'code': 'es', 'name': 'Spanish', 'flag': 'ðŸ‡ªðŸ‡¸'},
    {'code': 'fr', 'name': 'French', 'flag': 'ðŸ‡«ðŸ‡·'},
    {'code': 'de', 'name': 'German', 'flag': 'ðŸ‡©ðŸ‡ª'},
    {'code': 'it', 'name': 'Italian', 'flag': 'ðŸ‡®ðŸ‡¹'},
    {'code': 'pt', 'name': 'Portuguese', 'flag': 'ðŸ‡µðŸ‡¹'},
    {'code': 'ja', 'name': 'Japanese', 'flag': 'ðŸ‡¯ðŸ‡µ'},
    {'code': 'ko', 'name': 'Korean', 'flag': 'ðŸ‡°ðŸ‡·'},
    {'code': 'zh', 'name': 'Chinese', 'flag': 'ðŸ‡¨ðŸ‡³'},
  ];

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.all(24.0),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          const SizedBox(height: 48),
          Text(
            'What language do you want to learn?',
            style: Theme.of(context).textTheme.headlineSmall?.copyWith(
                  fontWeight: FontWeight.bold,
                ),
          ),
          const SizedBox(height: 8),
          Text(
            'Select the language you want to focus on',
            style: Theme.of(context).textTheme.titleMedium?.copyWith(
                  color: Colors.grey[600],
                ),
          ),
          const SizedBox(height: 32),
          Expanded(
            child: GridView.builder(
              gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(
                crossAxisCount: 2,
                childAspectRatio: 1.5,
                crossAxisSpacing: 16,
                mainAxisSpacing: 16,
              ),
              itemCount: _languages.length,
              itemBuilder: (context, index) {
                final language = _languages[index];
                final isSelected = language['code'] == widget.selectedLanguage;

                return InkWell(
                  onTap: () => widget.onLanguageSelected(language['code']!),
                  child: Container(
                    decoration: BoxDecoration(
                      border: Border.all(
                        color: isSelected
                            ? Theme.of(context).primaryColor
                            : Colors.grey[300]!,
                        width: 2,
                      ),
                      borderRadius: BorderRadius.circular(12),
                      color: isSelected
                          ? Theme.of(context).primaryColor.withOpacity(0.1)
                          : null,
                    ),
                    child: Column(
                      mainAxisAlignment: MainAxisAlignment.center,
                      children: [
                        Text(
                          language['flag']!,
                          style: const TextStyle(fontSize: 32),
                        ),
                        const SizedBox(height: 8),
                        Text(
                          language['name']!,
                          style: const TextStyle(
                            fontSize: 16,
                            fontWeight: FontWeight.w500,
                          ),
                        ),
                      ],
                    ),
                  ),
                );
              },
            ),
          ),
        ],
      ),
    );
  }
} 